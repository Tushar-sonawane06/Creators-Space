<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog | Creators-Space</title>
  <link rel="stylesheet" href="/src/css/style.css" />
  <link rel="stylesheet" href="/src/css/utils.css">
  <link rel="stylesheet" href="/src/css/responsive.css" />
  <link rel="stylesheet" href="/src/css/blog.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body id="main-body" class="overflow-x-hidden">
  <div id="navbar"></div>
  <script>
    fetch('/navbar.html')
      .then(r => r.text())
      .then(html => {
        document.getElementById('navbar').innerHTML = html;
        if (typeof initDarkModeToggle === 'function') initDarkModeToggle();
        if (window.getLanguageManager) {
          try { window.getLanguageManager().initLanguageSelector(); } catch (e) { /* ignore */ }
        }
      })
      .catch(err => console.error('Failed to load navbar:', err));
  </script>

  <!--Dark mode switch -->
  <div class="toggle-switch">
    <label class="switch-label">
      <input type="checkbox" class="checkbox" id="dark-mode-toggle" />
      <span class="slider"></span>
    </label>
  </div>

  <div class="blog-header">
    <h1>Explore Our Latest Blogs</h1>
    <input type="text" id="blog-search" placeholder="Search blog titles...">
  </div>

  <section class="blog-container">
    <!-- Blog 1 -->
    <div class="blog-card" data-id="blog1">
  <img src="/assets/images/blogpage/jsin30days.png" alt="Blog thumbnail" />
      <div class="blog-content">
        <span class="blog-category">JavaScript</span>
        <div class="blog-title">Mastering JavaScript in 30 Days</div>
        <div class="blog-meta">By Anurag | April 10, 2025</div>
        <div class="blog-excerpt">Learn how to go from beginner to advanced in JavaScript with practical tips, projects, and daily challenges.</div>
      </div>
      <!-- Like + Comment -->
      <div class="interaction-box">
        <button class="like-btn">ü§ç Like (<span class="like-count">0</span>)</button>
        <div class="comment-section">
          <textarea placeholder="Write a comment..."></textarea>
          <button class="comment-btn">Post Comment</button>
          <div class="comment-list"></div>
        </div>
      </div>
    </div>

    <!-- Blog 2 -->
    <div class="blog-card" data-id="blog2">
  <img src="/assets/images/blogpage/ui-ux.jpeg" alt="Blog thumbnail" />
      <div class="blog-content">
        <span class="blog-category">UI/UX</span>
        <div class="blog-title">UI/UX Trends to Watch in 2025</div>
        <div class="blog-meta">By Sneha | March 28, 2025</div>
        <div class="blog-excerpt">Explore emerging UI/UX design trends shaping the future of user experience across digital platforms.</div>
      </div>
      <div class="interaction-box">
        <button class="like-btn">ü§ç Like (<span class="like-count">0</span>)</button>
        <div class="comment-section">
          <textarea placeholder="Write a comment..."></textarea>
          <button class="comment-btn">Post Comment</button>
          <div class="comment-list"></div>
        </div>
      </div>
    </div>

    <!-- Blog 3 -->
    <div class="blog-card" data-id="blog3">
  <img src="/assets/images/blogpage/techstartup.jpeg" alt="Blog thumbnail" />
      <div class="blog-content">
        <span class="blog-category">StartUp</span>
        <div class="blog-title">How to Launch Your Tech Startup in distinct countries as we have more countries</div>
        <div class="blog-meta">By Raghav | March 15, 2025</div>
        <div class="blog-excerpt">Step-by-step guide to launching your startup ‚Äî from ideation to product-market fit and fundraising. Step-by-step guide to launching your startup ‚Äî from ideation to product-market fit and fundraising.</div>
      </div>
      <div class="interaction-box">
        <button class="like-btn">ü§ç Like (<span class="like-count">0</span>)</button>
        <div class="comment-section">
          <textarea placeholder="Write a comment..."></textarea>
          <button class="comment-btn">Post Comment</button>
          <div class="comment-list"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Resource Sharing Hub -->
<section class="resource-hub">
  <h2>Resource Sharing Hub</h2>
  
  <div class="resource-input">
    <input type="text" id="resourceName" placeholder="Enter resource name or description">
    <button id="addResourceBtn">Add</button>
  </div>

  <input type="text" id="resourceSearch" placeholder="Search resources..." class="resource-search">

  <div class="resources-container" id="resourcesContainer"></div>
</section>


  <footer class="footer">
    <div class="social">
  <h1><img width="80px" src="/assets/images/logo.png" alt="logo Anurag Vishwakarma's Creators-Space">
        <br>Creators-Space
      </h1>
      <h3>Social Media</h3>
      <div class="all-social-links"></div>
    </div>
    <div class="contact">
      <h3>Contact Us</h3>
      <p><a href="mailto:21brac0401@polygwalior.ac.in"><i class="fa-solid fa-envelope" id="envelope-icon"></i>21brac0401@polygwalior.ac.in</a></p>
      <br>
      <p><a href="tel:+9188xxxxxx89"><i class="fa-solid fa-phone" id="call-icon"></i>+91 88xxxxxx89</a></p>
    </div>
    <div class="form">
        <h3>Get In Touch</h3>
        <div class="form-group">
            <label for="footer-name">Name</label>
            <input type="text" id="footer-name" placeholder="Enter name" name="name">
        </div>
        <div class="form-group">
            <label for="footer-email">Email</label>
            <input type="email" id="footer-email" placeholder="Enter email" name="email">
        </div>
        <div class="form-group">
            <label for="footer-message">Message</label>
            <textarea id="footer-message" placeholder="Enter message" name="message"></textarea>
        </div>
        <button>Send</button>
      </div>
    <div class="copy">
      <p>Copyright &copy; 2024 - 2025 Creators-Space. All rights reserved.</p>
    </div>
  </footer>

  <script src="/src/js/language.js"></script>
  <script src="/src/js/navbar.js"></script>
  <script src="/src/js/auth.js"></script>
  <script src="/src/js/utils.js"></script>

  <!-- Dark mode + logo switch -->
  <script>
    const toggle = document.getElementById('dark-mode-toggle');
    const body = document.body;
    const logo = document.getElementById('navbar-logo');
    function updateLogo() {
      if (body.classList.contains('dark')) {
          logo.src = '/assets/images/logo-nav-dark.png';
        } else {
          logo.src = '/assets/images/logo-nav-light.png';
        }
    }
    toggle.addEventListener('change', () => {
      body.classList.toggle('dark');
      updateLogo();
    });
    document.addEventListener('DOMContentLoaded', () => {
      updateLogo();
    });
  </script>

  <!-- Blog search -->
  <script>

    
    document.addEventListener("DOMContentLoaded", function () {
      const searchInput = document.getElementById("blog-search");
      const blogCards = document.querySelectorAll(".blog-card");
      searchInput.addEventListener("input", function () {
        const query = this.value.toLowerCase().trim();
        blogCards.forEach(card => {
          const title = card.querySelector(".blog-title").textContent.toLowerCase();
          const category = card.querySelector(".blog-category").textContent.toLowerCase();
          const excerpt = card.querySelector(".blog-excerpt").textContent.toLowerCase();
          const matches = title.includes(query) || category.includes(query) || excerpt.includes(query);
          card.style.display = matches ? "block" : "none";
        });
      });
    });
  </script>

  <!-- Likes + Comments with Edit/Delete -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const blogCards = document.querySelectorAll(".blog-card");

      blogCards.forEach(card => {
        const blogId = card.getAttribute("data-id");

        // ---------- LIKE SYSTEM ----------
        const likeBtn = card.querySelector(".like-btn");
        const likeCountEl = card.querySelector(".like-count");
        let likes = parseInt(localStorage.getItem(blogId + "_likes")) || 0;
        let liked = JSON.parse(localStorage.getItem(blogId + "_liked")) || false;

        likeCountEl.textContent = likes;
        likeBtn.textContent = liked ? `‚ù§Ô∏è Liked (${likes})` : `ü§ç Like (${likes})`;

        likeBtn.addEventListener("click", () => {
          if (liked) {
            likes--;
            liked = false;
          } else {
            likes++;
            liked = true;
          }
          localStorage.setItem(blogId + "_likes", likes);
          localStorage.setItem(blogId + "_liked", liked);
          likeBtn.textContent = liked ? `‚ù§Ô∏è Liked (${likes})` : `ü§ç Like (${likes})`;
        });

        // ---------- COMMENT SYSTEM ----------
        const commentBtn = card.querySelector(".comment-btn");
        const commentInput = card.querySelector("textarea");
        const commentList = card.querySelector(".comment-list");

        function loadComments() {
          const comments = JSON.parse(localStorage.getItem(blogId + "_comments")) || [];
          commentList.innerHTML = "";
          comments.forEach((c, index) => {
            const div = document.createElement("div");
            div.className = "comment";
            div.innerHTML = `
              <span>${c}</span>
              <div class="comment-actions">
                <button onclick="editComment('${blogId}', ${index})">Edit</button>
                <button onclick="deleteComment('${blogId}', ${index})">Delete</button>
              </div>
            `;
            commentList.appendChild(div);
          });
        }

        commentBtn.addEventListener("click", () => {
          const comment = commentInput.value.trim();
          if (comment) {
            const comments = JSON.parse(localStorage.getItem(blogId + "_comments")) || [];
            comments.push(comment);
            localStorage.setItem(blogId + "_comments", JSON.stringify(comments));
            commentInput.value = "";
            loadComments();
          }
        });

        loadComments();
      });
    });

    // ---------- GLOBAL FUNCTIONS FOR EDIT/DELETE ----------
    function editComment(blogId, index) {
      const comments = JSON.parse(localStorage.getItem(blogId + "_comments")) || [];
      const newComment = prompt("Edit your comment:", comments[index]);
      if (newComment !== null && newComment.trim() !== "") {
        comments[index] = newComment.trim();
        localStorage.setItem(blogId + "_comments", JSON.stringify(comments));
        location.reload(); // reload to refresh UI
      }
    }

    function deleteComment(blogId, index) {
      const comments = JSON.parse(localStorage.getItem(blogId + "_comments")) || [];
      comments.splice(index, 1);
      localStorage.setItem(blogId + "_comments", JSON.stringify(comments));
      location.reload();
    }
  </script>

  <script>
  const resourceInput = document.getElementById("resourceName");
  const addResourceBtn = document.getElementById("addResourceBtn");
  const resourcesContainer = document.getElementById("resourcesContainer");
  const resourceSearch = document.getElementById("resourceSearch");

  let resources = JSON.parse(localStorage.getItem("resources")) || [];

  function renderResources(filter = "") {
    resourcesContainer.innerHTML = "";
    resources
      .filter(r => r.toLowerCase().includes(filter.toLowerCase()))
      .forEach((r, index) => {
        const card = document.createElement("div");
        card.className = "resource-card";

        const span = document.createElement("span");
        span.innerText = r;

        const deleteBtn = document.createElement("button");
        deleteBtn.innerText = "Delete";
        deleteBtn.addEventListener("click", () => deleteResource(index));

        card.appendChild(span);
        card.appendChild(deleteBtn);
        resourcesContainer.appendChild(card);
      });
  }

  addResourceBtn.addEventListener("click", () => {
    const val = resourceInput.value.trim();
    if (!val) return alert("Enter a resource");
    resources.push(val);
    localStorage.setItem("resources", JSON.stringify(resources));
    resourceInput.value = "";
    renderResources(resourceSearch.value);
  });

  resourceInput.addEventListener("keypress", e => {
    if (e.key === "Enter") addResourceBtn.click();
  });

  function deleteResource(index) {
    resources.splice(index, 1);
    localStorage.setItem("resources", JSON.stringify(resources));
    renderResources(resourceSearch.value);
  }

  resourceSearch.addEventListener("input", () => {
    renderResources(resourceSearch.value);
  });

  renderResources();
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
  const limitLines = {
    "blog-title": 2,
    "blog-excerpt": 3
  };

  document.querySelectorAll(".blog-title, .blog-excerpt").forEach(el => {
    const lineClamp = parseInt(getComputedStyle(el).getPropertyValue("-webkit-line-clamp"));
    const fullText = el.textContent.trim();

    // Clone element to measure text height
    const clone = el.cloneNode(true);
    clone.style.display = "block";
    clone.style.position = "absolute";
    clone.style.visibility = "hidden";
    clone.style.webkitLineClamp = "unset";
    clone.style.maxHeight = "none";
    document.body.appendChild(clone);

    const isOverflowing = clone.scrollHeight > el.clientHeight;
    document.body.removeChild(clone);

    if (isOverflowing) {
      const btn = document.createElement("button");
      btn.textContent = "Read more ‚Üì";
      btn.classList.add("read-more-btn");

      btn.addEventListener("click", () => {
        const expanded = el.classList.toggle("expanded");

        if (expanded) {
          el.style.webkitLineClamp = "unset";
          el.style.overflow = "visible";
          btn.textContent = "Read less ‚Üë";
        } else {
          el.style.webkitLineClamp = limitLines[el.classList.contains("blog-title") ? "blog-title" : "blog-excerpt"];
          el.style.overflow = "hidden";
          btn.textContent = "Read more ‚Üì";
        }
      });

      el.insertAdjacentElement("afterend", btn);
    }
  });
});

document.querySelectorAll('.blog-card').forEach(card => {
  const excerpt = card.querySelector('.blog-excerpt');
  if (!excerpt) return;

  const btn = document.createElement('button');
  btn.className = 'read-more-btn';
  btn.textContent = 'Read more';
  excerpt.after(btn);

  btn.addEventListener('click', () => {
    const expanded = btn.textContent === 'Read less';
    excerpt.style['-webkit-line-clamp'] = expanded ? 3 : 'unset';
    btn.textContent = expanded ? 'Read more' : 'Read less';
  });
});


</script>

</body>
</html>